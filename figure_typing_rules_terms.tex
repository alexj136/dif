\[\begin{array}{c}
    \RULE{Var-Im} \quad \inference{
        \exists j \in \DOM{\Gamma \cup \Gamma'} .
            \TJ{\Gamma, \Gamma'}{\IMP}{S}{j} \Rightarrow
            \DEPTH{\Gamma, i, j} + \SPEC{\Gamma, i, j} \neq 0
    }{
        \TJ{\Gamma, i: S, \Gamma'}{\IMP}{S}{i}
    } \\[4mm]

    \RULE{Var-Ex} \quad \TJ{\Gamma, p: S, \Gamma'}{p}{S}{p} \qquad

    \RULE{Sub} \quad \inference{
        \TJ{\Gamma}{t}{S}{\HAT{t}} \quad
        \SJ{\Gamma}{S}{S'}
    }{
        \TJ{\Gamma}{t}{S'}{\HAT{t}}
    } \\[4mm]

    \RULE{All-Ex-I} \quad \inference{
        x \leadsto u \quad
        \TJ{\Gamma, u: S}{t}{U}{\HAT{t}} \quad
        \{x, u\} \cap \FV{S} = \o
    }{
        \TJ{\Gamma}{\ABS{x}{S}{t}}{\DFUN{u}{S}{U}}{\ABS{u}{\TRANS{S}}{\HAT{t}}}
    } \\[4mm]

    \RULE{All-Ex-E} \quad \inference{
        \TJ{\Gamma}{x}{\DFUN{u}{S}{U}}{\HAT{x}} \quad
        \TJ{\Gamma}{y}{S}{\HAT{y}}
    }{
        \TJ{\Gamma}{x\ y}{\SUB{u}{y}U}{\HAT{x}\ \HAT{y}}
    } \\[4mm]

    \RULE{Let} \quad \inference{
        x \leadsto u \quad
        \TJ{\Gamma}{t}{S}{\HAT{t}} \quad
        \TJ{\Gamma, u: S}{t'}{U}{\HAT{t'}} \quad
        x \notin \FV{U}
    }{
        \TJ{\Gamma}{\LET{x}{t}{t'}}{U}{\LET{u}{\HAT{t}}{\HAT{t'}}}
    } \\[4mm]

    \RULE{And-I} \quad \inference{
        \TJ{\Gamma}{x}{S}{\HAT{x}} \quad
        \TJ{\Gamma}{x}{U}{\HAT{x}}
    }{
        \TJ{\Gamma}{x}{\AGG{S}{U}}{\HAT{x}}
    } \\[4mm]

    \RULE{\{\}-I} \quad \inference{
        x \leadsto u \quad
        \TJ{\Gamma, u: S}{d}{S}{\HAT{d}}
    }{
        \TJ{\Gamma}{\OBJ{x}{S}{d}}{\REC{u}{S}}{\OBJ{u}{\TRANS{S}}{\HAT{d}}}
    } \qquad

    \RULE{Fld-E} \quad \inference{
        \TJ{\Gamma}{x}{\FDEC{a}{S}}{\HAT{x}}
    }{
        \TJ{\Gamma}{x.a}{S}{\HAT{x}.a}
    } \\[4mm]

    \RULE{Rec-I} \quad \inference{
        \TJ{\Gamma}{x}{S}{\HAT{x}}
    }{
        \TJ{\Gamma}{x}{\REC{\HAT{x}}{S}}{\HAT{x}}
    } \qquad

    \RULE{Rec-E} \quad \inference{
        \TJ{\Gamma}{x}{\REC{\HAT{x}}{S}}{\HAT{x}}
    }{
        \TJ{\Gamma}{x}{S}{\HAT{x}}
    } \\[4mm]

    \RULE{All-Im-I} \quad \inference{
        u\ \text{fresh} \quad
        \TJ{\Gamma, u: S}{t}{U}{\HAT{t}} \quad
        u \notin \FV{S}
    }{
        \TJ{\Gamma}{t}{\IFUN{u}{S}{U}}{\ABS{u}{\TRANS{S}}{\HAT{t}}}
    } \\[4mm]

    \RULE{All-Im-E} \quad \inference{
        \TJ{\Gamma}{x}{\IFUN{u}{S}{U}}{\HAT{x}} \quad
        \TJ{\Gamma}{\IMP}{S}{v}
    }{
        \TJ{\Gamma}{x}{\SUB{u}{v}U}{\HAT{x}\ v}
    }
\end{array}\]
